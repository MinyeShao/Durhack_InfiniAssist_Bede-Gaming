# InfiniAssist
This Durhack project was jointly completed by Qiu X.Q., Shao M.Y. and Zhang L.Y.



<img width="400" height="400" src="./image/avk3n-l6x7g.png"/><img width="400" height="400" src="./image/asz4a-dxk19.png"/>

(LOGO generated by DALL·E 3)
## Durhack Bede Gaming AI Assitant






#### This project is built with `Python` and `uni-app`
#### Using revChatGPT.V1 as the backend
#### Complete daily customer service Q&A work. 
#### Project is divided into two parts: client and server. 
#### The server obtains the answers to questions and answers by transmitting specified json parameters to the openAI interface.

## Test screenshot



![20231104180321.jpg](image%2F20231104180321.jpg)


### Features



High concurrency support, using Gunicorn + Redis to implement multithreading; supports building images with DockerCompose; frontend UI optimization.

Set the server address on the frontend; optimized UI, adapted for H5 end.

Interface to query the number of online robots; added local caching to avoid having to manually enter the account password every time you use it.

Supports logging in with ChatGPT account and password, which can be deployed to a server for multi-user access.




**Usage is as follows:**

## Server side:

Pull this repository to the server (requires internet access, preferably an overseas server, and docker and docker-compose installed)

**For those who haven't installed docker and docker-compose, refer to the following commands**

**Installing docker:**

```shell
sudo apt-get remove docker docker-engine docker.io containerd runc

```shell
sudo apt-get remove docker docker-engine docker.io containerd runc
```

```shell
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg lsb-release
```

```shell
sudo mkdir -m 0755 -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
```

```shell
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

```shell
sudo chmod a+r /etc/apt/keyrings/docker.gpg
sudo apt-get update
```

```shell
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

```shell
sudo systemctl enable docker
sudo systemctl start docker
```

Installing docker-compose:

As of the development of this project, the latest version of docker-compose is 2.16.0, which can be viewed here. You can replace the version number below with the latest version.
```shell
sudo curl -L "https://github.com/docker/compose/releases/download/v2.16.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
```

```shell
sudo chmod +x /usr/local/bin/docker-compose
```



**Pull the source code**

```
git clone https://github.com/Fangnan700/AI-aides.git
```

```shell
cd ./AI-aides/ai_aides(Server)
```



**Modify Dockerfile, docker-compose.yml and gunicorn.conf as needed**

```dockerfile
# Base image
FROM python:3.11

# Working directory
WORKDIR /app

# Install dependencies based on the dependency list
COPY requirements.txt /app/
RUN pip install --upgrade --no-cache-dir -r requirements.txt

# Copy all files into the image
COPY . /app

# Expose port 5000 to the host machine
EXPOSE 5000

# Project start command, using gunicorn
CMD ["gunicorn", "-c", "gunicorn.conf", "app:app"]
```

```yaml
version: "1"
services:
  web:
    build: .
    command: gunicorn -c gunicorn.conf app:app
    volumes:
      - .:/app
    ports:
      - "80:5000"
    depends_on:
      - redis
  redis:
    image: redis:latest
    ports:
      - "6379:6379"

```

Modify ports of web in docker-compose.yml as needed to run the service on the specified port of the host machine.

```conf
# gunicorn.conf

# Number of parallel worker processes
workers = 4
# Number of threads per worker process
threads = 4
# Listen on internal port 5000
bind = '0.0.0.0:5000'
# Set the daemon to false, process is managed by supervisor
daemon = 'false'
# Work mode coroutine
worker_class = 'gevent'
# Set maximum concurrency
worker_connections = 2000
# Set
```

Attention!!!

If you encounter the following error while running: Access to Redis service is denied, please modify app.py as follows:

1.Run ifconfig docker0 | grep "inet " | awk '{ print $2 }' on the server to check the IP of docker0
2.Change the Redis connection configuration in app.py to the corresponding IP of docker0

```python
redis_pool = redis.ConnectionPool(host='<your docker0's IP>', port='6379', decode_responses=False)
redis_p = redis.Redis(host='<your docker0's IP>', port=6379, decode_responses=False)
```





**Build the Image**

```shell
sudo docker-compose build
```



**Start Running**

```shell
sudo docker-compose up
```



## App Side:
Clone this repository locally (requires Node.js environment and HBuilder X editor).

Configure the backend server address in the server settings.

Use HBuilder X to package the apk in the cloud and install it on your phone.

Note:

The H5 page is directly exported by Uniapp, and the code is obfuscated, making it hard to understand, but you only need to modify the following two places for direct deployment:

1、`pages-main-login-login.70f92203.js`

```js
// Modify this API endpoint according to your own server
url: "<your server's host and port>/login",

```

2、`pages-main-form-index.5990799a.js`

```js
// Modify this API endpoint according to your own server
url: "<your server's host and port>/chat",

```








